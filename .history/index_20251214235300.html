<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Happy Birthday An üéÇ</title>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

  <style>
    :root{
      --glass: rgba(255,255,255,.22);
      --border: rgba(255,255,255,.28);
      --shadow: rgba(0,0,0,.28);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      overflow:hidden;
      color:#fff;
      background: radial-gradient(1200px 600px at 20% 10%, rgba(255,120,170,.85), transparent 60%),
                  radial-gradient(1200px 600px at 80% 20%, rgba(120,220,255,.75), transparent 55%),
                  radial-gradient(1200px 600px at 50% 90%, rgba(255,230,120,.55), transparent 60%),
                  #0b1020;
      animation:bg 9s ease-in-out infinite alternate;
    }
    @keyframes bg{
      0%{filter:hue-rotate(0deg) saturate(1.05)}
      100%{filter:hue-rotate(18deg) saturate(1.2)}
    }

    /* subtle stars */
    .stars, .stars:before, .stars:after{
      content:"";
      position:absolute; inset:-200px;
      background-image: radial-gradient(#ffffff66 1px, transparent 1px);
      background-size: 38px 38px;
      opacity:.35;
      transform: rotate(8deg);
      animation: drift 18s linear infinite;
      pointer-events:none;
    }
    .stars:before{
      background-size: 62px 62px;
      opacity:.22;
      animation-duration: 26s;
    }
    .stars:after{
      background-size: 90px 90px;
      opacity:.16;
      animation-duration: 36s;
    }
    @keyframes drift{
      0%{transform:translateY(0) rotate(8deg)}
      100%{transform:translateY(120px) rotate(8deg)}
    }

    .wrap{
      width:min(420px, 92vw);
      position:relative;
      z-index:2;
      perspective: 1200px;
    }

    .card{
      background: var(--glass);
      border: 1px solid var(--border);
      border-radius: 22px;
      box-shadow: 0 26px 80px var(--shadow);
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      overflow:hidden;
      transform-style:preserve-3d;
      transform: rotateX(0deg) rotateY(0deg);
      transition: transform .12s ease-out;
    }

    .hero{
      position:relative;
      padding:16px 16px 0;
    }
    .photo{
      width:100%;
      border-radius:18px;
      overflow:hidden;
      position:relative;
      box-shadow: 0 14px 40px rgba(0,0,0,.25);
    }
    .photo img{
      width:100%;
      display:block;
      transform: scale(1.03);
      filter: contrast(1.05) saturate(1.08);
    }
    .glow{
      position:absolute; inset:0;
      background: radial-gradient(600px 220px at 50% 10%, rgba(255,255,255,.35), transparent 55%);
      pointer-events:none;
    }

    .content{
      padding:14px 18px 18px;
      text-align:center;
    }

    h1{
      margin:10px 0 8px;
      font-size:28px;
      letter-spacing:.2px;
      text-shadow: 0 10px 26px rgba(0,0,0,.3);
    }

    .typing{
      margin:10px auto 0;
      max-width: 360px;
      min-height: 110px;
      font-size:16px;
      line-height:1.6;
      opacity:.96;
    }
    .typing span.cursor{
      display:inline-block;
      width:10px;
      animation: blink .9s infinite;
    }
    @keyframes blink{ 50%{opacity:.2} }

    .actions{
      display:flex;
      gap:10px;
      justify-content:center;
      margin-top:14px;
      flex-wrap:wrap;
    }
    button{
      border:none;
      padding:12px 14px;
      border-radius:14px;
      cursor:pointer;
      font-size:15px;
      color:#101426;
      background: rgba(255,255,255,.9);
      box-shadow: 0 14px 30px rgba(0,0,0,.22);
      transition: transform .12s ease, opacity .12s ease;
    }
    button:active{ transform: scale(.98) }
    .btn-main{
      background: linear-gradient(135deg, #ffe08a, #ff7bb6);
      color:#1a0b13;
      font-weight:700;
    }
    .from{
      margin-top:14px;
      font-size:13px;
      opacity:.75;
    }

    /* gift reveal */
    .gift{
      margin-top:12px;
      background: rgba(0,0,0,.18);
      border: 1px solid rgba(255,255,255,.16);
      border-radius: 16px;
      padding: 0;
      overflow:hidden;
      max-height: 0;
      transition: max-height .45s ease;
    }
    .gift.open{ max-height: 180px; }
    .gift .inner{
      padding: 14px 14px 16px;
      font-size: 15px;
      line-height: 1.6;
    }
    .badge{
      display:inline-block;
      padding:6px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.16);
      border: 1px solid rgba(255,255,255,.2);
      margin-bottom:10px;
      font-size:12px;
      letter-spacing:.2px;
    }

    /* floating hearts */
    .heart{
      position:absolute;
      left: var(--x);
      bottom:-30px;
      font-size: var(--s);
      opacity: .85;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,.2));
      animation: rise var(--d) linear forwards;
      pointer-events:none;
      z-index:1;
    }
    @keyframes rise{
      0%{ transform: translateY(0) translateX(0) rotate(0deg); opacity:.0 }
      8%{ opacity:.9 }
      100%{ transform: translateY(-110vh) translateX(var(--dx)) rotate(18deg); opacity:0 }
    }
  </style>
</head>

<body>
  <div class="stars"></div>

  <audio id="music" src="music.mp3" loop></audio>

  <div class="wrap">
    <div class="card" id="card">
      <div class="hero">
        <div class="photo">
          <img src="an.jpg" alt="b√© An"/>
          <div class="glow"></div>
        </div>
      </div>

      <div class="content">
        <h1>üéâ Happy Birthday, An üéÇ</h1>

        <div class="typing" id="typing"></div>

        <div class="actions">
          <button class="btn-main" onclick="startShow()">B·∫≠t nh·∫°c + ph√°o gi·∫•y üíù</button>
          <button onclick="toggleGift()">M·ªü qu√† b√≠ m·∫≠t üòº</button>
        </div>

        <div class="gift" id="gift">
          <div class="inner">
            <div class="badge">üéÅ Secret</div><br/>
            An √†‚Ä¶ h√¥m nay em ƒë∆∞·ª£c ‚Äúƒë·∫∑c quy·ªÅn‚Äù ƒë∆∞·ª£c chi·ªÅu nhi·ªÅu h∆°n b√¨nh th∆∞·ªùng.<br/>
            V√† anh th√¨‚Ä¶ th√≠ch ƒë∆∞·ª£c l√†m ng∆∞·ªùi chi·ªÅu em nh·∫•t üòå
          </div>
        </div>

        <div class="from">‚Äî t·ª´ ng∆∞·ªùi lu√¥n nghƒ© v·ªÅ em</div>
      </div>
    </div>
  </div>

<script>
  // Typing effect
  const lines = [
    "An ∆°i, h√¥m nay em l√† nh√¢n v·∫≠t ch√≠nh ƒë√≥ nha ‚ú®",
    "Ch√∫c em tu·ªïi m·ªõi vui h∆°n, xinh h∆°n, v√† b√¨nh y√™n h∆°n.",
    "C√≥ m·ªát th√¨ d·ª±a m·ªôt ch√∫t‚Ä¶ anh ·ªü ƒë√¢y.",
    "B·∫•m n√∫t d∆∞·ªõi ƒëi ‚Äî em nh·∫≠n qu√† n√® üéÅ"
  ];
  const typingEl = document.getElementById('typing');

  let iLine = 0, iChar = 0, typingTimer = null;
  function type(){
    if(iLine >= lines.length) return;
    const current = lines[iLine];
    const before = lines.slice(0,iLine).map(t=>`<div>${escapeHtml(t)}</div>`).join('');
    const now = `<div>${escapeHtml(current.slice(0,iChar))}<span class="cursor">|</span></div>`;
    typingEl.innerHTML = before + now;

    iChar++;
    if(iChar > current.length){
      iLine++; iChar = 0;
      typingTimer = setTimeout(type, 550);
    }else{
      typingTimer = setTimeout(type, 32 + Math.random()*36);
    }
  }
  function escapeHtml(s){
    return s.replace(/[&<>"']/g, m => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
  }
  type();

  // 3D tilt
  const card = document.getElementById('card');
  window.addEventListener('mousemove', (e)=>{
    const r = card.getBoundingClientRect();
    const cx = r.left + r.width/2;
    const cy = r.top + r.height/2;
    const dx = (e.clientX - cx) / r.width;
    const dy = (e.clientY - cy) / r.height;
    card.style.transform = `rotateY(${dx*10}deg) rotateX(${(-dy)*10}deg)`;
  });
  window.addEventListener('mouseleave', ()=>{
    card.style.transform = `rotateY(0deg) rotateX(0deg)`;
  });

  // Confetti + sparkles
  let started = false;
  function startShow(){
    if(!started){
      started = true;
      document.getElementById('music').play().catch(()=>{});
      burst();
      sparkleLoop();
      heartLoop();
    }else{
      burst();
    }
  }

  function burst(){
    confetti({ particleCount: 220, spread: 90, origin: { y: 0.6 } });
    setTimeout(()=>confetti({ particleCount: 120, spread: 60, origin: { y: 0.2 } }), 120);
  }

  function sparkleLoop(){
    const end = Date.now() + 8_000;
    (function frame(){
      confetti({
        particleCount: 4,
        spread: 140,
        startVelocity: 18,
        ticks: 120,
        origin: { x: Math.random(), y: Math.random()*0.6 }
      });
      if(Date.now() < end) requestAnimationFrame(frame);
    })();
  }

  // Floating hearts
  function spawnHeart(){
    const h = document.createElement('div');
    h.className = 'heart';
    const emojis = ["üíó","üíñ","üíò","üíù","üíû","‚ú®"];
    h.textContent = emojis[Math.floor(Math.random()*emojis.length)];
    h.style.setProperty('--x', (10 + Math.random()*80) + 'vw');
    h.style.setProperty('--dx', ((Math.random()*2-1)*60) + 'px');
    h.style.setProperty('--d', (3.2 + Math.random()*2.6) + 's');
    h.style.setProperty('--s', (18 + Math.random()*14) + 'px');
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), 6500);
  }
  function heartLoop(){
    let n = 0;
    const id = setInterval(()=>{
      spawnHeart();
      n++;
      if(n > 45) clearInterval(id);
    }, 140);
  }

  function toggleGift(){
    document.getElementById('gift').classList.toggle('open');
    // little pop
    confetti({ particleCount: 60, spread: 50, origin: { y: 0.75 } });
  }
</script>
</body>
</html>
